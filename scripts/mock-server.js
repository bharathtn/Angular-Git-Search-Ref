var users = {
    "5710721999c246f5a1cc7572": {
        "_id": "5710721999c246f5a1cc7572",
        "firstname": "Raju",
        "lastname": "Singh",
        "company": "Riflexions",
        "email": "rajusingh@riflexions.com",
        "role": "Admin",
        "password": "Raju@Singh729.com"
    },
    "57107219b5c818c9b5d44509": {
        "_id": "57107219b5c818c9b5d44509",
        "firstname": "Smitha",
        "lastname": "Basavaraj",
        "company": "Riflexions",
        "email": "smitha@riflexions.com",
        "role": "Admin",
        "password": "Smitha@Basavaraj99.com"
    },

    "57107219c3a7db8e86e4074d": {
        "_id": "57107219c3a7db8e86e4074d",
        "firstname": "Viral",
        "lastname": "Talati",
        "company": "Riflexions",
        "email": "viraltalati@riflexions.com",
        "role": "Admin",
        "password": "Ciral@Talati108.com"
    },
    "57107219718dda589909d63f": {
        "_id": "57107219718dda589909d63f",
        "firstname": "Lillian",
        "lastname": "Mcgowan",
        "company": "QOT",
        "email": "lillianmcgowan@qot.com",
        "role": "Client",
        "password": "Lillian@Mcgowan873.com"
    },
    "5710721931191dfb0ae63cbc": {
        "_id": "5710721931191dfb0ae63cbc",
        "firstname": "Hartman",
        "lastname": "Barrera",
        "company": "SEQUITUR",
        "email": "hartmanbarrera@sequitur.com",
        "role": "Client",
        "password": "Hartman@Barrera391.com"
    },
    "571072198c559092070d9398": {
        "_id": "571072198c559092070d9398",
        "firstname": "Simpson",
        "lastname": "Fischer",
        "company": "POOCHIES",
        "email": "simpsonfischer@poochies.com",
        "role": "Client",
        "password": "Simpson@Fischer575.com"
    },
    "57107219d2169a6230e58122": {
        "_id": "57107219d2169a6230e58122",
        "firstname": "Gray",
        "lastname": "Nash",
        "company": "MEGALL",
        "email": "graynash@megall.com",
        "role": "Client",
        "password": "Gray@Nash490.com"
    },
    "57107219841f8b02c0529729": {
        "_id": "57107219841f8b02c0529729",
        "firstname": "Bridgette",
        "lastname": "Webster",
        "company": "ENOMEN",
        "email": "bridgettewebster@enomen.com",
        "role": "Client",
        "password": "Bridgette@Webster282.com"
    },
    "57107219448b5fd3c8e906a2": {
        "_id": "57107219448b5fd3c8e906a2",
        "firstname": "Hollie",
        "lastname": "Wong",
        "company": "REMOTION",
        "email": "holliewong@remotion.com",
        "role": "Client",
        "password": "Hollie@Wong832.com"
    }
};


var questions = {
    "57847529c91407d68f6a93a3": {
        "id": "57847529c91407d68f6a93a3",
        "type": "TEXT",
        "text": "What was the best part of our service?",
        "options": [],
        "createdAt": "2016-03-06 T03:22:18 -06:-30"
    },
    "545475295f341502aaf0873a": {
        "id": "545475295f341502aaf0873a",
        "type": "MCQ1",
        "text": "Did we give you information that was easy to understand?",
        "options": ["Very Easy", "Fairly Easy", "Undecided", "Fairly Unhelpful", "Very Unhelpful"],
        "createdAt": "2016-01-26 T03:05:39 -06:-30"
    },
    "2315752943c0cdbb28410d2b": {
        "id": "2315752943c0cdbb28410d2b",
        "type": "TEXT",
        "text": "How might we improve?",
        "options": "",
        "createdAt": "2016-02-04 T03:03:02 -06:-30"
    },
    "8546752988bf03d88b4faa52": {
        "id": "8546752988bf03d88b4faa52",
        "type": "MCQ1",
        "text": "How informative did you find our staff?",
        "options": ["Very Good", "Fairly Good", "Undecided", "Fairly Poor", "Very Poor"],
        "createdAt": "2016-01-12 T07:45:59 -06:-30"
    },
    "95517529361be2dd98dbb0f4": {
        "id": "95517529361be2dd98dbb0f4",
        "type": "MCQ1",
        "text": "How well did we keep you up-to-date with progress?",
        "options": ["Very Well", "Fairly Well", "Undecided", "Fairly Poor", "Very Poor"],
        "createdAt": "2016-01-30 T08:48:13 -06:-30"
    },
    "784475299d180c5b93c62d69": {
        "id": "784475299d180c5b93c62d69",
        "type": "MCQ1",
        "text": "How well did we listen to what you had to say?",
        "options": ["Very Good", "Fairly Good", "Undecided", "Fairly Poor", "Very Poor"],
        "createdAt": "2016-01-23 T04:24:40 -06:-30"
    },
    "461575299fa06c91a487423d": {
        "id": "461575299fa06c91a487423d",
        "type": "MCQ1",
        "text": "Would you recommend us to someone else if they needed legal help or advice?",
        "options": ["Certain To", "Likely To", "Undecided", "Unlikely To", "Certain Not To"],
        "createdAt": "2016-02-20 T03:10:27 -06:-30"
    },
    "85157529dec01fddb8fffd24": {
        "id": "85157529dec01fddb8fffd24",
        "type": "MCQN",
        "text": "What all services you like?",
        "options": ["Communication", "Technology", "Understandability", "Transparency", "Attitute"],
        "createdAt": "2016-02-15 T10:31:13 -06:-30"
    },
    "215175293fdcfa74172e033a": {
        "id": "215175293fdcfa74172e033a",
        "type": "RATE",
        "text": "How do you rate our overall level of service??",
        "options": [],
        "createdAt": "2016-04-15 T07:18:04 -06:-30"
    },
    "542175299209045a828ecba7": {
        "id": "542175299209045a828ecba7",
        "type": "TEXT",
        "text": "Do you have any further comments or suggestions that may help us to improve our level of service?",
        "options": "",
        "createdAt": "2016-01-31 T11:57:34 -06:-30"
    }
};


var questionnaires = {
    "66ada656a5555584152s55": {
        "id": "66ada656a5555584152s55",
        "name": "ICICI Bank Technical Feedback",
        "questions": [
            "57847529c91407d68f6a93a3",
            "545475295f341502aaf0873a",
            "2315752943c0cdbb28410d2b",
            "8546752988bf03d88b4faa52",
            "95517529361be2dd98dbb0f4"
        ]
    },
    "66ada656a5555514152s55": {
        "id": "66ada656a5555514152s55",
        "name": " ICICI Bank Non-technical Feedback",
        "questions": [
            "784475299d180c5b93c62d69",
            "461575299fa06c91a487423d",
            "85157529dec01fddb8fffd24",
            "215175293fdcfa74172e033a",
            "542175299209045a828ecba7"
        ]
    },
    "66ada656a5555524152s55": {
        "id": "66ada656a5555524152s55",
        "name": "KBL Technical Feedback",
        "questions": [
            "57847529c91407d68f6a93a3",
            "545475295f341502aaf0873a",
            "2315752943c0cdbb28410d2b",
            "8546752988bf03d88b4faa52",
            "95517529361be2dd98dbb0f4"
        ]
    },
    "66ada656a5555534152s55": {
        "id": "66ada656a5555534152s55",
        "name": "KBL Non-technical Feedback",
        "questions": [
            "784475299d180c5b93c62d69",
            "461575299fa06c91a487423d",
            "85157529dec01fddb8fffd24",
            "215175293fdcfa74172e033a",
            "542175299209045a828ecba7"
        ]
    },
    "66ada656a5555544152s55": {
        "id": "66ada656a5555544152s55",
        "name": "Canara Bank Technical Feedback",
        "questions": [
            "57847529c91407d68f6a93a3",
            "545475295f341502aaf0873a",
            "2315752943c0cdbb28410d2b",
            "8546752988bf03d88b4faa52",
            "95517529361be2dd98dbb0f4"
        ]
    }
};


var server = new Pretender(function () {

    /**
        GET /
        GET /:id
        POST /
        DELETE /:id
        PUT /:id
    */

    this.get('/api/users', function (request) {
        var pageParam = request.queryParams.page ? request.queryParams.page : 1;
        var pagelimit = request.queryParams.limit ? request.queryParams.limit : 5;
        var total = Object.keys(users).length;
        var meta = {
            "total": total,
            "limit": pagelimit,
            "page": pageParam,
            "pages": Math.ceil(total / pagelimit)
        };
        return [200, {
            "Content-Type": "application/json"
        }, JSON.stringify({
            meta: meta,
            users: Object.keys(users).map(function (key) {
                return users[key];
            }).splice((pageParam - 1) * pagelimit, pagelimit)

        })]
    });

    this.get('/api/users/:id', function (request) {
        var id = request.params.id;
        return [200, {
            "Content-Type": "application/json"
        }, JSON.stringify({
            user: users[id]
        })]
    });

    pjs_uuid_tracker = 0;
    this.post('/api/signup', function (request) {
        var params = request.requestBody;
        var new_id = ++pjs_uuid_tracker;
        params._id = new_id;
        users[new_id] = params;
        return [201, {
            "Content-Type": "application/json"
        }, JSON.stringify({
            user: params
        })]
    });

    this.delete('/api/users/:id', function (request) {
        var id = request.params.id;
        delete users[id]
        return [200, {
            "Content-Type": "application/json"
        }, JSON.stringify({})]

    });

    this.put('/api/users/:id', function (request) {
        var params = request.requestBody.user;
        var id=request.params.id;
        for(key in params){
            users[id][key]=params[key];
        }
        return [200, {
            "Content-Type": "application/json"
        }, JSON.stringify({user:users[id]})];
    });

    this.get('/partials/:abc', this.passthrough);
});
